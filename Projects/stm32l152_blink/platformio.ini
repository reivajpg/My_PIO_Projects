; ==============================================================================
; Configuración General
; ==============================================================================
[env]
platform = ststm32
board = nucleo_l152re
framework = arduino

; Configuración específica para STM32L152RCT6 (256KB Flash / 32KB RAM)
; La placa nucleo_l152re usa el STM32L152RET6 (512KB Flash / 80KB RAM)
board_build.mcu = stm32l152rct6
board_upload.maximum_size = 262144
board_upload.maximum_ram_size = 32768

; Configuración del monitor serial
monitor_speed = 115200

; ==============================================================================
; Opción 1: Subida con ST-Link / OpenOCD (Por defecto)
; ==============================================================================
[env:nucleo_l152re_stlink]
upload_protocol = stlink

; Solución de problemas de subida (Upload Troubleshooting)
; Si tienes problemas con clones de ST-Link V2, descomenta la siguiente línea:
; upload_flags = -c set CPUTAPID 0x2ba01477
; O esta otra para usar el modo HLA (High Level Adapter) que funciona mejor con clones:
; upload_flags = -c transport select hla_swd

; ==============================================================================
; Opción 2: Subida con STM32CubeProgrammer (Recomendado si ya lo tienes instalado)
; ==============================================================================
; Si OpenOCD falla pero STM32CubeProgrammer funciona manualmente, usa este entorno.
; Requiere tener instalado STM32CubeProgrammer CLI y añadido al PATH.
[env:nucleo_l152re_cube]
upload_protocol = stm32cube
; Opcional: Si necesitas especificar el puerto o modo:
; upload_flags = swd
